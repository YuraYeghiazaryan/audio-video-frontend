<app-local-user></app-local-user>

<button (click)="toggleVideo()" [disabled]="!joined">
  {{ this.localUser.audioVideoUser?.isVideoOn ? 'Off Video' : 'On Video' }}
</button>

<button (click)="toggleAudio()" [disabled]="!joined">
  {{ this.localUser.audioVideoUser?.isAudioOn ? 'Off Audio' : 'On Audio' }}
</button>

<button (click)="createDemoTeams()">
  Create demo teams
</button>

<button (click)="toggleTeamTalk()">
  {{ gameMode.isTeamTalkStarted ? 'End' : 'Start' }} team talk
</button>

<div id="remote-users">

  <ng-container *ngIf="gameMode.isStarted && gameMode.isTeamTalkStarted; then inTeamTalk else notInTeamTalk"></ng-container>

  <ng-template #inTeamTalk>
    In team talk
    <ng-container *ngFor="let team of gameMode.teams | keyvalue">
      <ng-container *ngIf="team.value.userIds.has(localUser.id)">
        <ng-container *ngFor="let userId of team.value.userIds">
          <app-remote-user *ngIf="remoteUsers[userId]" [remoteUser]="remoteUsers[userId]"></app-remote-user>
        </ng-container>
      </ng-container>
    </ng-container>
  </ng-template>

  <ng-template #notInTeamTalk>
    Not in team talk
    <div style="border: black" *ngFor="let remoteUser of (this.remoteUsers | filterOnlineUsers)">
      <app-remote-user [remoteUser]="remoteUser"></app-remote-user>
    </div>
  </ng-template>
</div>
